import Head from "next/head";
import Link from "next/link";
import { Button, Stack, useColorMode, Icon, Flex } from "@chakra-ui/react";

import { useAuth } from "@/utils/auth";

export default function Home() {
  const auth = useAuth();
  const { colorMode, toggleColorMode } = useColorMode();

  return (
    <Flex direction='column' align='center' justify='center' h='100vh'>
      <Head>
        <script
          dangerouslySetInnerHTML={{
            __html: `
          if (document.cookie && document.cookie.includes('feedback-farm-auth')) {
            window.location.href = "/sites"
          }
        `,
          }}
        />
        <title>Feedback Farm</title>
      </Head>

      <Icon viewBox='0 0 75 125' boxSize={20}>
        <path
          d='M12.516 24.352H51.82c2.016 0 3.024.726 3.024 2.18 0 .655-.469 1.85-1.407 3.585-.937 1.735-2.039 3.164-3.304 4.29-1.078.984-2.813 1.476-5.203 1.476H3.164c-.703 0-1.219-.024-1.547-.07-.328-.094-.633-.305-.914-.633-.234-.328-.351-.797-.351-1.407 0-1.734 1.359-3.726 4.078-5.976 2.765-2.297 5.46-3.445 8.086-3.445zM.422 120.68V86.79c0-1.688.562-2.813 1.687-3.376 1.172-.562 2.977-.844 5.414-.844 2.579 0 4.383.282 5.415.844 1.078.563 1.617 1.688 1.617 3.375v26.438c0 2.296-.492 4.007-1.477 5.132-1.172 1.407-2.836 2.649-4.992 3.727-2.11 1.078-3.844 1.617-5.203 1.617-1.64 0-2.461-1.008-2.461-3.023zm0-45.211V44.32c0-1.687.562-2.812 1.687-3.375 1.172-.562 2.977-.843 5.414-.843 2.625 0 4.454.28 5.485.843 1.031.516 1.547 1.64 1.547 3.375v19.617c0 1.922.96 2.883 2.883 2.883h28.617c2.015 0 3.023.727 3.023 2.18 0 .656-.469 1.875-1.406 3.656-.938 1.735-2.04 3.164-3.305 4.29-1.078.937-2.812 1.406-5.203 1.406H3.304c-1.921 0-2.882-.961-2.882-2.883z'
          fill='currentColor'
        />
        <path
          d='M63.484 99.648H24.18c-2.016 0-3.024-.726-3.024-2.18 0-.656.469-1.85 1.407-3.585.937-1.735 2.039-3.164 3.304-4.29 1.078-.984 2.813-1.476 5.203-1.476h41.766c.703 0 1.219.024 1.547.07.328.094.633.305.914.633.234.328.351.797.351 1.407 0 1.734-1.359 3.726-4.078 5.976-2.765 2.297-5.46 3.445-8.086 3.445zM75.578 3.32v33.89c0 1.688-.562 2.813-1.687 3.376-1.172.562-2.977.844-5.414.844-2.579 0-4.383-.282-5.415-.844-1.078-.563-1.617-1.688-1.617-3.375V10.773c0-2.296.492-4.007 1.477-5.132 1.172-1.407 2.836-2.649 4.992-3.727C70.024.836 71.758.297 73.117.297c1.64 0 2.461 1.008 2.461 3.023zm0 45.211V79.68c0 1.687-.562 2.812-1.687 3.375-1.172.562-2.977.843-5.414.843-2.625 0-4.454-.28-5.485-.843-1.031-.516-1.547-1.64-1.547-3.375V60.062c0-1.921-.96-2.882-2.883-2.882H29.945c-2.015 0-3.023-.727-3.023-2.18 0-.656.469-1.875 1.406-3.656.938-1.735 2.04-3.164 3.305-4.29 1.078-.937 2.812-1.406 5.203-1.406h35.86c1.921 0 2.882.961 2.882 2.883z'
          fill='currentColor'
        />
      </Icon>
      {auth.user ? (
        <>
          <Link href='/sites'>
            <Button mt={8}>View Dashboard</Button>
          </Link>
        </>
      ) : (
        <Stack>
          <Button
            mt={8}
            onClick={(e) => auth.signinWithGitHub()}
            leftIcon={
              <Icon viewBox='0 0 533.5 544.3'>
                <g>
                  <path
                    d='M533.5 278.4c0-18.5-1.5-37.1-4.7-55.3H272.1v104.8h147c-6.1 33.8-25.7 63.7-54.4 82.7v68h87.7c51.5-47.4 81.1-117.4 81.1-200.2z'
                    fill='#4285f4'
                  />
                  <path
                    d='M272.1 544.3c73.4 0 135.3-24.1 180.4-65.7l-87.7-68c-24.4 16.6-55.9 26-92.6 26-71 0-131.2-47.9-152.8-112.3H28.9v70.1c46.2 91.9 140.3 149.9 243.2 149.9z'
                    fill='#34a853'
                  />
                  <path
                    d='M119.3 324.3c-11.4-33.8-11.4-70.4 0-104.2V150H28.9c-38.6 76.9-38.6 167.5 0 244.4l90.4-70.1z'
                    fill='#fbbc04'
                  />
                  <path
                    d='M272.1 107.7c38.8-.6 76.3 14 104.4 40.8l77.7-77.7C405 24.6 339.7-.8 272.1 0 169.2 0 75.1 58 28.9 150l90.4 70.1c21.5-64.5 81.8-112.4 152.8-112.4z'
                    fill='#ea4335'
                  />
                </g>
              </Icon>
            }
          >
            Sign in with Google
          </Button>
          <Button
            onClick={(e) => auth.signinWithGitHub()}
            leftIcon={
              <Icon>
                <g
                  fill='none'
                  stroke='currentColor'
                  strokeWidth='2'
                  strokeLinecap='round'
                  strokeLinejoin='round'
                >
                  <path d='M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22' />
                </g>
              </Icon>
            }
          >
            Sign in with GitHub
          </Button>
        </Stack>
      )}
    </Flex>
  );
}
